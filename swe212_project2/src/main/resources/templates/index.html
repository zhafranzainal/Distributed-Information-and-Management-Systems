<!DOCTYPE html>
<html lang="en" xmlns:th="http://www.thymeleaf.org">
<head>
    <meta charset="UTF-8">
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@5.1.3/dist/css/bootstrap.min.css">
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icon@1.5.0/font/bootstrap-icon.css">
    <link rel="stylesheet" href="https://cdnjs.cloudfare.com/ajax/libs/font-awesome/4.7.0/css/font-awesome.min.css">
    <title>Home Page for Employee</title>
</head>
<body>
<div class="card"style="width: 50%">
    <h5 class="card-title">Employee</h5>
    <div class="modal-footer">
        <a th:href="#"th:onclick="Add()"class="btn btn-info"><i class="fa fa-plus"></i>&nbsp;&nbsp;Add new</a>
    </div>
    <table class="table-table striped">
        <thead>
        <tr>
            <th>Emp No</th>
            <th>Name</th>
            <th>Job</th>
            <th>Manager No</th>
            <th>Hire Date</th>
            <th>Salary</th>
            <th>Commission</th>
            <th>Dept No</th>
            <th colspan="2">Operation</th>
        </tr>
        </thead>
        <tbody>
        <tr th:each="employee:${eList}">
            <td th:text="*{employee.empno}"></td>
            <td th:text="*{employee.ename}"></td>
            <td th:text="*{employee.job}"></td>
            <td th:text="*{employee.mgr}"></td>
            <td th:text="*{employee.hiredate}"></td>
            <td th:text="*{employee.sal}"></td>
            <td th:text="*{employee.comm}"></td>
            <td th:text="*{employee.deptno}"></td>
            <td><a href="#"th:onclick="'javascript:Update('+${employee.empno}+');'" class="btn btn-warning"><i class="fa fa-pencil"></i></a></td>
            <td><a href="#"th:onclick="'javascript:Delete('+${employee.empno}+');'" class="btn btn-danger"><i class="fa fa-trash"></i></a></td>
        </tr>
        </tbody>
    </table>
</div>
<script src="https://ajax.googleapis.com/ajax/libs/jquery/3.6.0/jquery.min.js"></script>
<script src="https://cdn.jsdelivr.net/npm/@popperjs/core@2.10.2/dist/umd/popper.min.js"></script>
<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.1.3/dist/js/bootstrap.min.js"></script>
<script>
    function Add(){
        $.ajax({
            method: 'GET',
            url: "/addemployee",
            success: function (data){
                $('#modalPlaceHolder').html(data);
                $('#modalPlaceHolder').find('.modal').modal('show');
            },
            error: function (response){
                alert("Message: " + r.Message);
                alert("StackTrace: " + r.StackTrace);
                alert("ExceptionType: " + r.ExceptionType);
            }
        });
    }
</script>
<script>
    function Update(empno){
        $.ajax({
            method: 'GET',
            url: "/update",
            data:{"empno":empno},
            success: function (data){
                $('#modalPlaceHolder').html(data);
                $('#modalPlaceHolder' ).find('.modal').modal('show');
            },
            error: function (response){
                alert("Message: " + r.Message);
                alert("StackTrace: " + r.StackTrace);
                alert("ExceptionType: " + r.ExceptionType);
            }
        });
    }
</script>
<script>
    function Delete(empno){
        $.ajax({
            method: 'GET',
            url: "/deleteemployee",
            data:{"empno":empno},
            success: function (data){
                $('#modalPlaceHolder').html(data);
                $('#modalPlaceHolder' ).find('.modal').modal('show');
            },
            error: function (response){
                alert("Message: " + r.Message);
                alert("StackTrace: " + r.StackTrace);
                alert("ExceptionType: " + r.ExceptionType);
            }
        });
    }
</script>
</body>
</html>